{% extends 'ferreteria/index.html' %}

{% block content %}
<div class="container my-3">
  <div class="card shadow-sm">
    <div class="card-header bg-primary text-white py-2">
      <h5 class="mb-0 text-center">Editar perfil</h5>
    </div>

    <div class="card-body">
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="row g-3">

          <!-- FORMULARIO -->
          <div class="col-md-8">

            <div class="mb-2">
              <label class="form-label">Nombre</label>
              {{ form.first_name }}
            </div>

            <div class="mb-2">
              <label class="form-label">Apellido</label>
              {{ form.last_name }}
            </div>

            <div class="mb-2">
              <label class="form-label">País</label>
              {{ form.pais }}
            </div>

            <div class="mb-2">
              <label class="form-label">Dirección</label>
              {{ form.direccion }}
            </div>

            <div class="mb-2">
              <label class="form-label">Fecha de nacimiento</label>
              {{ form.fecha_de_nacimiento }}
            </div>

            <div class="mb-2">
              <label class="form-label">Cambiar avatar</label>
              {{ form.avatar }}
            </div>

            <div class="mb-2">
              <label class="form-label">Nueva contraseña</label>
              {{ form.password }}
              <small class="text-muted">
                Dejar vacío para mantener la contraseña actual
              </small>
            </div>

          </div>

          <!-- AVATAR -->
          <div class="col-md-4 text-center">
            <p class="fw-bold mb-2">Imagen de perfil</p>

            {% if user.avatar %}
              <img
                src="{{ user.avatar.url }}"
                class="img-fluid rounded-circle mb-2"
                style="max-width: 140px;"
              >
            {% else %}
              <img
                src="/media/default.png"
                class="img-fluid rounded-circle mb-2"
                style="max-width: 140px;"
              >
            {% endif %}
          </div>

        </div>

        <div class="text-center mt-3">
          <button type="submit" class="btn btn-success btn-sm px-4">
            Guardar cambios
          </button>
          <a href="{% url 'profile_detail' %}" class="btn btn-secondary btn-sm px-4">
            Cancelar
          </a>
        </div>

      </form>
    </div>
  </div>
</div>
{% endblock %}
